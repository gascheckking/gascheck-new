// ========== KONFIGURATION ========== //
const CONFIG = {
  baseScanAPI: "https://api.basescan.org/api",
  apiKey: "YOUR_BASESCAN_API_KEY", // Ers채tt med din riktiga API-nyckel
  warpAICoinContract: "0x8ab57bdfc4e900b62f309bfaa6e1802755330ca6"
};

// ========== APP STATE ========== //
let currentAddress = null;
let isConnected = false;
let userData = {
  coins: 0,
  transactions: [],
  gasEfficiency: 0
};

// ========== DOM ELEMENT ========== //
const elements = {
  // Header
  walletStatus: document.getElementById('wallet-status'),
  
  // Connect
  connectBtn: document.getElementById('connect-wallet'),
  
  // Input
  walletInput: document.getElementById('wallet-input'),
  checkBtn: document.getElementById('check-btn'),
  
  // Overview
  gasMeter: document.getElementById('gas-meter'),
  gasLabel: document.getElementById('gas-label'),
  coinDisplay: document.getElementById('coin-display'),
  claimCoinsBtn: document.getElementById('claim-coins-btn'),
  activityList: document.getElementById('activity-list'),
  
  // Navigation
  navBtns: document.querySelectorAll('.nav-btn'),
  tabContents: document.querySelectorAll('.tab-content'),
  
  // Settings
  settingsBtn: document.getElementById('settings-btn'),
  settingsModal: document.getElementById('settings-modal'),
  closeSettings: document.getElementById('close-settings'),
  themeSelect: document.getElementById('theme-select')
};

// ========== WALLET CONNECTION ========== //

async function connectWallet() {
  if (window.ethereum) {
    try {
      const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
      currentAddress = accounts[0];
      isConnected = true;
      updateWalletStatus();
      fetchWalletData(currentAddress);
    } catch (error) {
      console.error("Wallet connection error:", error);
      alert("Wallet connection failed");
    }
  } else {
    alert("Please install MetaMask or another Web3 wallet!");
  }
}

function updateWalletStatus() {
  if (isConnected && currentAddress) {
    const shortAddress = `${currentAddress.substring(0, 6)}...${currentAddress.substring(38)}`;
    elements.walletStatus.innerHTML = `
      <i class="fas fa-wallet"></i>
      <span>${shortAddress}</span>
    `;
    elements.walletStatus.classList.add('wallet-connected');
    elements.walletStatus.classList.remove('wallet-disconnected');
  } else {
    elements.walletStatus.innerHTML = `
      <i class="fas fa-wallet"></i>
      <span>Not connected</span>
    `;
    elements.walletStatus.classList.remove('wallet-connected');
    elements.walletStatus.classList.add('wallet-disconnected');
  }
}

// ========== DATA FETCHING ========== //

async function fetchWalletData(address) {
  try {
    // Simulera laddning
    elements.activityList.innerHTML = '<div class="loading">Loading data...</div>';
    
    // H채mta transaktioner fr책n BaseScan
    const txResponse = await fetch(
      `${CONFIG.baseScanAPI}?module=account&action=txlist&address=${address}&startblock=0&endblock=99999999&sort=desc&apikey=${CONFIG.apiKey}`
    );
    
    const txData = await txResponse.json();
    
    if (txData.status === "1") {
      userData.transactions = txData.result.slice(0, 5).map(tx => ({
        hash: tx.hash,
        type: getTxType(tx),
        amount: tx.value / 1e18,
        timestamp: new Date(tx.timeStamp * 1000).toLocaleDateString(),
        gasUsed: tx.gasUsed
      }));
      
      // Ber채kna gas efficiency
      const totalGas = userData.transactions.reduce((sum, tx) => sum + parseInt(tx.gasUsed), 0);
      userData.gasEfficiency = Math.max(0, 100 - Math.min(100, totalGas / 100000));
      
      // Uppdatera UI
      updateUI();
    } else {
      throw new Error("No transactions found");
    }
  } catch (error) {
    console.error("Error fetching wallet data:", error);
    elements.activityList.innerHTML = '<div class="error">Could not load transactions</div>';
  }
}

function getTxType
